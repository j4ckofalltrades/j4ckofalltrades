<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Jordan Duabe"><meta name=description content="This guide walks you through the necessary steps to upload your package to the npm registry with some recommendations along the way.
Setup npm account      Register for an npm account
  Test your account by logging in using npm
# you should be prompted for your username, password, and email address # and an OTP if you've enabled 2FA $ npm login # this should print out your npm username $ npm whoami   Dry-run (Testing your package locally)    Test out your package locally to ensure that everything works before publihsing it to the npm registry."><meta name=keywords content="blog,programmer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Publishing to the npm registry"><meta name=twitter:description content="This guide walks you through the necessary steps to upload your package to the npm registry with some recommendations along the way.
Setup npm account      Register for an npm account
  Test your account by logging in using npm
# you should be prompted for your username, password, and email address # and an OTP if you've enabled 2FA $ npm login # this should print out your npm username $ npm whoami   Dry-run (Testing your package locally)    Test out your package locally to ensure that everything works before publihsing it to the npm registry."><meta property="og:title" content="Publishing to the npm registry"><meta property="og:description" content="This guide walks you through the necessary steps to upload your package to the npm registry with some recommendations along the way.
Setup npm account      Register for an npm account
  Test your account by logging in using npm
# you should be prompted for your username, password, and email address # and an OTP if you've enabled 2FA $ npm login # this should print out your npm username $ npm whoami   Dry-run (Testing your package locally)    Test out your package locally to ensure that everything works before publihsing it to the npm registry."><meta property="og:type" content="article"><meta property="og:url" content="https://jduabe.dev/posts/npm-publish/"><meta property="article:published_time" content="2021-06-19T13:43:02+08:00"><meta property="article:modified_time" content="2021-06-19T13:43:02+08:00"><title>Publishing to the npm registry Â· /home/j4ckofalltrades</title><link rel=canonical href=https://jduabe.dev/posts/npm-publish/><link rel=preload href="https://jduabe.dev/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://jduabe.dev/css/coder.min.144dbded64fa39be909de032d781daea652fbf3fad40384fd40f4dd1d28ccbcf.css integrity="sha256-FE297WT6Ob6QneAy14Ha6mUvvz+tQDhP1A9N0dKMy88=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jduabe.dev/css/coder-dark.min.f37febc669ce189201c1918fac1948a254686c8d366a312c2d72b2bb71ad97d1.css integrity="sha256-83/rxmnOGJIBwZGPrBlIolRobI02ajEsLXKyu3Gtl9E=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jduabe.dev/custom.css><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://jduabe.dev/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://jduabe.dev/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.77.0"></head><body class="preload-transitions colorscheme-auto" onload=twemoji.parse(document.body);><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jduabe.dev/>/home/j4ckofalltrades</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://profile.jduabe.dev>Profile</a></li><li class=navigation-item><a class=navigation-link href=https://jduabe.dev/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://jduabe.dev/projects/>Projects</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jduabe.dev/posts/npm-publish/>Publishing to the npm registry</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2021-06-19T13:43:02+08:00>June 19, 2021</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>3-minute read</span></div></div></header><div><p>This guide walks you through the necessary steps to upload your package to the
<a href=https://npmjs.com>npm registry</a> with some recommendations along the way.</p><h2 id=setup-npm-account>Setup npm account
<a class=heading-link href=#setup-npm-account><i class="fa fa-link" aria-hidden=true></i></a></h2><ol><li><p>Register for an <a href=https://npmjs.com/signup>npm account</a></p></li><li><p>Test your account by logging in using <code>npm</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># you should be prompted for your username, password, and email address</span>
<span style=color:#75715e># and an OTP if you&#39;ve enabled 2FA</span>
$ npm login
   
<span style=color:#75715e># this should print out your npm username</span>
$ npm whoami
</code></pre></div></li></ol><h2 id=dry-run-testing-your-package-locally>Dry-run (Testing your package locally)
<a class=heading-link href=#dry-run-testing-your-package-locally><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Test out your package locally to ensure that everything works before publihsing
it to the npm registry. You can do this by invoking <code>npm install</code> and providing
the path to your package e.g.:</p><p><code>$ npm install /path/to/your/package</code></p><p>Another thing to do is to review the contents of the published package to make
sure that it doesn&rsquo;t include any sensitive or unnecessary information. You can
perform a <code>dry-run</code> with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ npm publish --dry-run

<span style=color:#75715e># output should look something like</span>
npm notice 
npm notice &lt;package_name@version&gt;
npm notice <span style=color:#f92672>===</span> Tarball Contents <span style=color:#f92672>===</span> 
npm notice &lt;tarball_contents_here&gt;
npm notice <span style=color:#f92672>===</span> Tarball Details <span style=color:#f92672>===</span> 
npm notice &lt;tarball_details_here&gt;
npm notice 
+ &lt;package_name@version&gt;
</code></pre></div><p>Additionally you can create a <code>.npmignore</code> file to exclude files that you don&rsquo;t
want to publish to the registry.</p><h2 id=publishing-to-the-npm-registry>Publishing to the npm registry
<a class=heading-link href=#publishing-to-the-npm-registry><i class="fa fa-link" aria-hidden=true></i></a></h2><p>In your package&rsquo;s root directory, execute:</p><p><code>$ npm publish</code></p><p>If publishing a scoped public package, execute:</p><p><code>$ npm publish --access public</code></p><p>When the publish process finishes, you should be able to see your public
package page at <a href=https://npmjs.com/package/your-package-name>https://npmjs.com/package/your-package-name</a>.</p><p>Congrats, you&rsquo;ve successfully published your package to the npm registry. ðŸŽ‰</p><h2 id=bonus-automation-with-github-packages>Bonus: Automation with GitHub Packages
<a class=heading-link href=#bonus-automation-with-github-packages><i class="fa fa-link" aria-hidden=true></i></a></h2><p>You&rsquo;ll probably want to automate this process as part of your CI/CD pipeline.
Here&rsquo;s how to set it up using GitHub Actions.</p><ol><li><p>Create a <a href=https://docs.npmjs.com/creating-and-viewing-access-tokens>new npm access token</a></p></li><li><p>Add the access token as a secret to your target GitHub repository. You can
find this under Settings > Secrets for your repo. Give the secret a name e.g.
<code>NPM_TOKEN</code>.</p></li><li><p>Create a GitHub action workflow file in your repo at
<code>.github/workflows/npm-publish.yml</code> with the following contents:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Publish package to npm</span>

<span style=color:#f92672>on</span>:
<span style=color:#f92672>release</span>:
    <span style=color:#f92672>types</span>: [<span style=color:#ae81ff>created]</span>
   
<span style=color:#f92672>jobs</span>:
<span style=color:#f92672>build</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#f92672>permissions</span>:
    <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>read</span>
    <span style=color:#f92672>packages</span>: <span style=color:#ae81ff>write</span>
    <span style=color:#f92672>steps</span>:
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v1</span>
        <span style=color:#f92672>with</span>:
        <span style=color:#f92672>node-version</span>: <span style=color:#e6db74>&#39;14.x&#39;</span>
        <span style=color:#f92672>registry-url</span>: <span style=color:#e6db74>&#39;https://registry.npmjs.org&#39;</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm install</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm test</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm run build</span>
    <span style=color:#75715e># Publish to npm (append `--access public` for scoped packages)</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm publish</span>
        <span style=color:#f92672>env</span>:
        <span style=color:#f92672>NODE_AUTH_TOKEN</span>: <span style=color:#ae81ff>${{ secrets.NPM_TOKEN }}</span>
</code></pre></div><p>This workflow is triggered when a new release is created but you can also
configure it to be triggered when a different event happens e.g. when a
new tag gets pushed. Refer to the <a href=https://docs.github.com/en/actions>GitHub Actions documentation</a>
for more configuration options.</p><p>That&rsquo;s it, time to get publishing.</p></li></ol></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2020 -
2021
Jordan Duabe
Â·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=https://jduabe.dev/js/coder.min.f92783b4545b68f3523e5d6ad91d93f76818f9d0db2ffa13bda31b6119cde62b.js integrity="sha256-+SeDtFRbaPNSPl1q2R2T92gY+dDbL/oTvaMbYRnN5is="></script></body></html>