<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Jordan Duabe"><meta name=description content="Guide for publishing packages to the npm registry"><meta name=keywords content="blog,programmer,personal"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://res.cloudinary.com/j4ckofalltrades/image/upload/c_limit,w_900,g_face/v1633760759/blog/publish-guides/npm-publish_ssmdeh.png"><meta name=twitter:title content="Publishing to the npm registry"><meta name=twitter:description content="Guide for publishing packages to the npm registry"><meta property="og:title" content="Publishing to the npm registry"><meta property="og:description" content="Guide for publishing packages to the npm registry"><meta property="og:type" content="article"><meta property="og:url" content="https://jduabe.dev/posts/2021/npm-publish/"><meta property="og:image" content="https://res.cloudinary.com/j4ckofalltrades/image/upload/c_limit,w_900,g_face/v1633760759/blog/publish-guides/npm-publish_ssmdeh.png"><meta property="article:published_time" content="2021-06-19T13:43:02+08:00"><meta property="article:modified_time" content="2021-06-19T13:43:02+08:00"><title>Publishing to the npm registry Â· /home/j4ckofalltrades</title><link rel=canonical href=https://jduabe.dev/posts/2021/npm-publish/><link rel=preload href="https://jduabe.dev/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://jduabe.dev/css/coder.min.8e2b2510f60e1715eae08d113a808dcdaf17f6f711edb9e969be38d0074d240d.css integrity="sha256-jislEPYOFxXq4I0ROoCNza8X9vcR7bnpab440AdNJA0=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jduabe.dev/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jduabe.dev/custom.css><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://jduabe.dev/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://jduabe.dev/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.77.0"></head><body class="preload-transitions colorscheme-auto" onload=twemoji.parse(document.body);><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jduabe.dev/>/home/j4ckofalltrades</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://profile.jduabe.dev>Profile</a></li><li class=navigation-item><a class=navigation-link href=https://jduabe.dev/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://jduabe.dev/projects/>Projects</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jduabe.dev/posts/2021/npm-publish/>Publishing to the npm registry</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2021-06-19T13:43:02+08:00>June 19, 2021</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>3-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i><a href=https://jduabe.dev/categories/dev/>dev</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i><span class=tag><a href=https://jduabe.dev/tags/javascript/>javascript</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=https://jduabe.dev/tags/npm/>npm</a></span>
<span class=separator>â€¢</span>
<span class=tag><a href=https://jduabe.dev/tags/typescript/>typescript</a></span></div></div></header><div><p><img src=https://res.cloudinary.com/j4ckofalltrades/image/upload/w_1000/v1633760759/blog/publish-guides/npm-publish_ssmdeh.png alt=npm></p><p>This guide walks you through the necessary steps to upload your package to the
<a href=https://npmjs.com>npm registry</a> with some recommendations along the way.</p><h2 id=setup-npm-account>Setup npm account
<a class=heading-link href=#setup-npm-account><i class="fa fa-link" aria-hidden=true></i></a></h2><ol><li><p>Register for an <a href=https://npmjs.com/signup>npm account</a></p></li><li><p>Test your account by logging in using <code>npm</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># you should be prompted for your username, password, and email address</span>
<span style=color:#75715e># and an OTP if you&#39;ve enabled 2FA</span>
$ npm login
   
<span style=color:#75715e># this should print out your npm username</span>
$ npm whoami
</code></pre></div></li></ol><h2 id=dry-run-testing-your-package-locally>Dry-run (Testing your package locally)
<a class=heading-link href=#dry-run-testing-your-package-locally><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Test out your package locally to ensure that everything works before publihsing
it to the npm registry. You can do this by invoking <code>npm install</code> and providing
the path to your package e.g.:</p><p><code>$ npm install /path/to/your/package</code></p><p>Another thing to do is to review the contents of the published package to make
sure that it doesn&rsquo;t include any sensitive or unnecessary information. You can
perform a <code>dry-run</code> with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ npm publish --dry-run

<span style=color:#75715e># output should look something like</span>
npm notice 
npm notice &lt;package_name@version&gt;
npm notice <span style=color:#f92672>===</span> Tarball Contents <span style=color:#f92672>===</span> 
npm notice &lt;tarball_contents_here&gt;
npm notice <span style=color:#f92672>===</span> Tarball Details <span style=color:#f92672>===</span> 
npm notice &lt;tarball_details_here&gt;
npm notice 
+ &lt;package_name@version&gt;
</code></pre></div><p>Additionally you can create a <code>.npmignore</code> file to exclude files that you don&rsquo;t
want to publish to the registry.</p><h2 id=publishing-to-the-npm-registry>Publishing to the npm registry
<a class=heading-link href=#publishing-to-the-npm-registry><i class="fa fa-link" aria-hidden=true></i></a></h2><p>In your package&rsquo;s root directory, execute:</p><p><code>$ npm publish</code></p><p>If publishing a scoped public package, execute:</p><p><code>$ npm publish --access public</code></p><p>When the publish process finishes, you should be able to see your public
package page at <a href=https://npmjs.com/package/your-package-name>https://npmjs.com/package/your-package-name</a>.</p><p>Congrats, you&rsquo;ve successfully published your package to the npm registry. ðŸŽ‰</p><h2 id=bonus-automation-with-github-packages>Bonus: Automation with GitHub Packages
<a class=heading-link href=#bonus-automation-with-github-packages><i class="fa fa-link" aria-hidden=true></i></a></h2><p>You&rsquo;ll probably want to automate this process as part of your CI/CD pipeline.
Here&rsquo;s how to set it up using GitHub Actions.</p><ol><li><p>Create a <a href=https://docs.npmjs.com/creating-and-viewing-access-tokens>new npm access token</a></p></li><li><p>Add the access token as a secret to your target GitHub repository. You can
find this under Settings > Secrets for your repo. Give the secret a name e.g.
<code>NPM_TOKEN</code>.</p></li><li><p>Create a GitHub action workflow file in your repo at
<code>.github/workflows/npm-publish.yml</code> with the following contents:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Publish package to npm</span>

<span style=color:#f92672>on</span>:
<span style=color:#f92672>release</span>:
    <span style=color:#f92672>types</span>: [<span style=color:#ae81ff>created]</span>
   
<span style=color:#f92672>jobs</span>:
<span style=color:#f92672>build</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#f92672>permissions</span>:
    <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>read</span>
    <span style=color:#f92672>packages</span>: <span style=color:#ae81ff>write</span>
    <span style=color:#f92672>steps</span>:
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
    - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v1</span>
        <span style=color:#f92672>with</span>:
        <span style=color:#f92672>node-version</span>: <span style=color:#e6db74>&#39;14.x&#39;</span>
        <span style=color:#f92672>registry-url</span>: <span style=color:#e6db74>&#39;https://registry.npmjs.org&#39;</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm install</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm test</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm run build</span>
    <span style=color:#75715e># Publish to npm (append `--access public` for scoped packages)</span>
    - <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm publish</span>
        <span style=color:#f92672>env</span>:
        <span style=color:#f92672>NODE_AUTH_TOKEN</span>: <span style=color:#ae81ff>${{ secrets.NPM_TOKEN }}</span>
</code></pre></div><p>This workflow is triggered when a new release is created but you can also
configure it to be triggered when a different event happens e.g. when a
new tag gets pushed. Refer to the <a href=https://docs.github.com/en/actions>GitHub Actions documentation</a>
for more configuration options.</p><p>That&rsquo;s it, time to get publishing.</p></li></ol></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2020 -
2022
Jordan Duabe
Â·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=https://jduabe.dev/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script></body></html>