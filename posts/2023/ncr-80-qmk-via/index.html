<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Jordan Duabe"><meta name=description content="QMK/VIA firmware for the NCR-80 keyboard"><meta name=keywords content="blog,programmer,personal"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://res.cloudinary.com/j4ckofalltrades/image/upload/c_limit,w_900,g_face/v1676107180/keebs/ncr80/ncr-80-via_hlgb5c.png"><meta name=twitter:title content="NCR-80 QMK/VIA firmware"><meta name=twitter:description content="QMK/VIA firmware for the NCR-80 keyboard"><meta property="og:title" content="NCR-80 QMK/VIA firmware"><meta property="og:description" content="QMK/VIA firmware for the NCR-80 keyboard"><meta property="og:type" content="article"><meta property="og:url" content="https://jduabe.dev/posts/2023/ncr-80-qmk-via/"><meta property="og:image" content="https://res.cloudinary.com/j4ckofalltrades/image/upload/c_limit,w_900,g_face/v1676107180/keebs/ncr80/ncr-80-via_hlgb5c.png"><meta property="article:published_time" content="2023-04-25T17:16:02+08:00"><meta property="article:modified_time" content="2023-04-25T17:16:02+08:00"><title>NCR-80 QMK/VIA firmware · /home/j4ckofalltrades</title><link rel=canonical href=https://jduabe.dev/posts/2023/ncr-80-qmk-via/><link rel=preload href="https://jduabe.dev/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://jduabe.dev/css/coder.min.8e2b2510f60e1715eae08d113a808dcdaf17f6f711edb9e969be38d0074d240d.css integrity="sha256-jislEPYOFxXq4I0ROoCNza8X9vcR7bnpab440AdNJA0=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jduabe.dev/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://jduabe.dev/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://jduabe.dev/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://jduabe.dev/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.77.0"></head><body class="preload-transitions colorscheme-auto" onload=twemoji.parse(document.body);><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jduabe.dev/>/home/j4ckofalltrades</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://profile.jduabe.dev>Profile</a></li><li class=navigation-item><a class=navigation-link href=https://jduabe.dev/posts/>Blog</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jduabe.dev/posts/2023/ncr-80-qmk-via/>NCR-80 QMK/VIA firmware</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2023-04-25T17:16:02+08:00>April 25, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>3-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i><a href=https://jduabe.dev/categories/keyboards/>keyboards</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i><span class=tag><a href=https://jduabe.dev/tags/qmk/>qmk</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jduabe.dev/tags/via/>via</a></span></div></div></header><div><p>Built the <a href=https://jduabe.dev/posts/2022/ncr-80>NCR-80</a> last year, great-looking board especially if you like the
retro aesthetic, and is a pleasure to type on.</p><p>One thing I did notice was that the product listing points to a Google Drive link to the pre-compiled <a href="https://drive.google.com/drive/folders/1e3mjUg-N15SFVrExlBiI01-XOKpPm9ry?usp=sharing">QMK and VIA firmware</a>,
but it hasn&rsquo;t been added to the QMK and VIA repositories. I thought this would be a good weekend project (<strong>Spoiler</strong>: it took longer than a weekend).</p><p>I wrote the steps of how I got it done (the steps also apply to any keyboard firmware).</p><h2 id=converting-kbfirmware-json-to-qmk>Converting KBFirmware JSON to QMK
<a class=heading-link href=#converting-kbfirmware-json-to-qmk><i class="fa fa-link" aria-hidden=true></i></a></h2><p>The starting point is to convert the KBFirmware JSON from the provided &ldquo;QMK&rdquo; files from the product listing, and then
converting them to QMK formatted files.</p><p>There are a couple of tools that can be used for this purpose:</p><ul><li>Recommended: <a href=https://noroadsleft.github.io/kbf_qmk_converter>KBFirmware JSON to QMK Parser</a></li><li>Deprecated: <a href=https://kbfirmware.com>Keyboard Firmware Builder</a></li></ul><p>The resulting files will be the base of the QMK firmware for the keyboard.</p><h2 id=creating-a-qmk-pull-request>Creating a QMK pull request
<a class=heading-link href=#creating-a-qmk-pull-request><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Make sure to read the <a href="https://docs.qmk.fm/#/contributing?id=keyboards">contribution guide</a> as a first step.
It is also a good idea to check out other supported keyboard firmware to get a feel for the directory structure, and conventions in use.</p><p>A keyboard firmware folder (simplified example) should look something like:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>mt
|-- ncr80
|   |-- keymaps
|       |-- default
|           |-- keymap.c
|-- info.json
|-- readme.md
<span style=color:#e6db74>`</span>-- rules.mk
</code></pre></div><p>In cases where keyboards have multiple versions or revisions e.g. rev1, rev2 or hotswap/soldered, the directory structure
will look different; refer to QMK&rsquo;s contribution guide linked above.</p><p>Link to the pull request on GitHub for reference: <a href=https://github.com/qmk/qmk_firmware/pull/19130>[Keyboard] Add NCR-80</a></p><h2 id=creating-a-via-pull-request>Creating a VIA pull request
<a class=heading-link href=#creating-a-via-pull-request><i class="fa fa-link" aria-hidden=true></i></a></h2><p>In order to add VIA support for a keyboard, it is required to enable the VIA feature in QMK, and adding a <code>via</code>-compatible
keymap for the keyboard. You can check out the QMK pull request linked above; look for the <code>keymaps/via</code> directory.</p><p>Read the VIA docs for <a href=https://www.caniusevia.com/docs/configuring_qmk>configuring QMK</a> for a more in-depth guide.
I also recommend reading about the <a href=https://www.caniusevia.com/docs/specification>VIA spec</a>.</p><p>It is also required to have the QMK pull request merged in before contributing to the VIA repository.</p><h2 id=via-v2-vs-v3-definitions>VIA V2 vs V3 definitions
<a class=heading-link href=#via-v2-vs-v3-definitions><i class="fa fa-link" aria-hidden=true></i></a></h2><p>It is basically just a matter of copying the VIA <code>json</code> files from the Drive link referenced at the start of this post.
The main difference here is the location of the definitions depend on the version; <code>V2</code> definitions are located in the
<code>src/&lt;manufacturer>/&lt;keyboard></code> directory while the <code>V3</code> definitions are in the <code>v3/&lt;manufacturer>/&lt;keyboard></code>.</p><p>If you have a <code>V2</code> definition, you can convert it a <code>V3</code> definition by running the <code>scripts/build-all.ts</code> file in the
<a href=https://github.com/the-via/keyboards>via keyboards</a> repository.</p><p>Link to the pull request on GitHub for reference: <a href=https://github.com/the-via/keyboards/pull/1548>Add support for NCR-80</a></p><p>That&rsquo;s it, once the pull request gets merged VIA should be able to detect your keyboard.</p><p><img src=https://res.cloudinary.com/j4ckofalltrades/image/upload/v1676107180/keebs/ncr80/ncr-80-via_hlgb5c.png alt="VIA NCR-80"></p></div><footer></footer></article></section></div></main><script src=https://jduabe.dev/js/coder.min.a350362441276ec5c1671926420497bb8e52b63ead1d51d3c9bc4342d0039526.js integrity="sha256-o1A2JEEnbsXBZxkmQgSXu45Stj6tHVHTybxDQtADlSY="></script></body></html>